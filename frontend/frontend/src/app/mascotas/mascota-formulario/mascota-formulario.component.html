<main class="principal d-flex flex-column align-items-center p-4">
    <div class="container formulario">
        <div class="card p-4 card-body-scrollable">
            <h2>{{ mascota.id ? 'Editar Mascota' : 'Agregar Mascota' }}</h2>

            <form (ngSubmit)="guardarMascota()" class="form d-flex flex-column">
                <div class="row">
                    <div class="col-md-6 grupo">
                        <label for="nombre">Nombre</label>
                        <input [(ngModel)]="mascota.nombre" type="text" id="nombre" name="nombre" placeholder="Nombre de la mascota" required class="completo">
                    </div>
                    <div class="col-md-6 grupo">
                        <label for="especie">Especie</label>
                        <input [(ngModel)]="mascota.especie" type="text" id="especie" name="especie" placeholder="Ej: Perro, Gato" required class="completo">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 grupo">
                        <label for="raza">Raza</label>
                        <input [(ngModel)]="mascota.raza" type="text" id="raza" name="raza" placeholder="Raza de la mascota" class="completo">
                    </div>
                    <div class="col-md-6 grupo">
                        <label for="peso">Peso (kg)</label>
                        <input [(ngModel)]="mascota.peso" type="number" step="0.1" id="peso" name="peso" placeholder="Peso de la mascota" class="completo">
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-6 grupo">
                        <label for="sexo">Sexo</label>
                        <select [(ngModel)]="mascota.sexo" id="sexo" name="sexo" class="completo">
                            <option value="" disabled>Seleccione</option>
                            <option value="Macho">Macho</option>
                            <option value="Hembra">Hembra</option>
                        </select>
                    </div>
                    <div class="col-md-6 grupo">
                        <label for="estado">Estado</label>
                        <select [(ngModel)]="mascota.estado" id="estado" name="estado" class="completo">
                            <option value="Saludable">Saludable</option>
                            <option value="En tratamiento">En tratamiento</option>
                            <option value="Recuperándose">Recuperándose</option>
                            <option value="Control rutinario">Control rutinario</option>
                        </select>
                    </div>
                </div>

                <div class="row" *ngIf="!mascota.id">
                    <div class="col-md-6 grupo">
                        <label for="fecha">Fecha de Nacimiento</label>
                        <input type="date" [(ngModel)]="mascota.fechaNacimiento" id="fecha" name="fecha" placeholder="Pon la fecha de nacimiento de tu perrito" class="completo">
                    </div>
                    <div class="col-md-6 grupo">
                        <label for="chip">ID de Microchip</label>
                        <input type="text" [(ngModel)]="mascota.microchipID" id="chip" name="chip" placeholder="Pon el ID del microchip" class="completo">
                    </div>
                </div>
                    <div class="row">
                    <div class="col-md-12 grupo">
                        <label>Vacunas</label>
                        <div *ngFor="let vacuna of mascota?.vacunas; let i = index" class="d-flex mb-2">
                        <input type="text"
                                [(ngModel)]="mascota.vacunas[i]"
                                name="vacuna{{i}}"  
                                class="form-control me-2"
                                placeholder="Ej: Rabia" />
                        <button type="button" class="btn btn-danger btn-sm" (click)="eliminarVacuna(i)">X</button>
                        </div>
                        <button type="button" class="btn btn-success btn-sm mt-2" (click)="agregarVacuna()">Agregar vacuna</button>
                    </div>
                    </div>

                    <div class="row">
                    <div class="col-md-12 grupo">
                        <label>Alergias</label>
                        <div *ngFor="let alergia of mascota?.alergias; let i = index" class="d-flex mb-2">
                        <input type="text"
                                [(ngModel)]="mascota.alergias[i]"
                                name="alergia{{i}}"
                                class="form-control me-2" />
                        <button type="button" class="btn btn-danger btn-sm" (click)="eliminarAlergia(i)">X</button>
                        </div>
                        <button type="button" class="btn btn-success btn-sm mt-2" (click)="agregarAlergia()">Agregar alergia</button>
                    </div>

                </div>
                
                <div class="row">
                     <div class="col-md-6 grupo">
                        <label for="ultima">Fecha de la última visita</label>
                        <input type="date" [(ngModel)]="mascota.ultimavisita" id="ultima" name="ultima" placeholder="Fecha de la ultima visita" class="completo">
                    </div>
                    <div class="col-md-6 grupo">
                        <label for="foto">Foto (URL)</label>
                        <input [(ngModel)]="mascota.foto" type="text" id="foto" name="foto" placeholder="https://ejemplo.com/foto.jpg" class="completo">
                    </div>
                </div>

                <div class="row">
                    <div class="col-12 grupo">
                         <label for="observaciones">Observaciones</label>
                         <input type="text" [(ngModel)]="mascota.observaciones" id="observaciones" name="observaciones" placeholder="Pon las observaciones pertinentes" class="completo">
                     </div>
                 </div>

                <button type="submit" class="submit-btn d-flex align-items-center justify-content-center mt-3">
                    Guardar Mascota
                </button>
            </form>
        </div>
    </div>
</main>

